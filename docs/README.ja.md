# MediGuard：AI搭載の服薬管理ソリューション

**MediGuard**は、高齢者と介護者の両方の服薬管理を簡素化するために設計された、包括的なモバイルファーストのヘルスケアソリューションです。AIの力を活用し、処方箋の追跡、スケジュールの管理、タイムリーなリマインダーの送信といった面倒なプロセスを自動化します。

このシステムは、主に2つのコンポーネントで構成されています：

1.  React Nativeで構築された**クロスプラットフォームのモバイルアプリケーション**。
2.  処方箋分析用のAI駆動OCRエンジンを搭載した、PythonとFastAPIで構築された**強力なバックエンドサーバー**。

-----

## ✨ 主な機能

### 📱 モバイルアプリケーション (React Native)

モバイルアプリは、2つの異なる役割に合わせたユーザーフレンドリーなインターフェースを提供し、すべてのユーザーに最適な体験を保証します。

#### 👴 **高齢者モード**

シンプルさと明確さを念頭に置いて設計されたこのモードは、高齢者が自信を持って自分の服薬を管理できるようにします。

  * **一目でわかるダッシュボード**：メイン画面には現在の時刻と次に予定されている服薬が明確に表示され、推測の必要がありません。
  * **プッシュ通知**：各服用ごとにタイムリーでフレンドリーなリマインダーが送信され、薬の飲み忘れを防ぎます。
  * **簡素化された設定**：服薬時間の調整やユーザー役割の切り替えが簡単にできるコントロール。

#### 👩‍⚕️ **介護者モード**

このモードは、介護者が愛する人の服薬スケジュールを監視および管理するための堅牢なツールセットを提供します。

  * **包括的なダッシュボード**：患者の服薬遵守状況と今後のスケジュールを完全に把握できます。
  * **AI処方箋スキャナー**：新しい処方箋を数秒でデジタル化します。写真を撮るだけで、AIが関連するすべての情報を自動的に抽出します。
  * **リモートスケジュール管理**：患者の服薬時間、服用量、通知設定を設定および調整します。
  * **カレンダービュー**：より良い計画と追跡のために、月全体の服薬スケジュールを視覚化します。

### 🤖 AI OCRバックエンドサーバー (Python)

バックエンドはMediGuardのインテリジェントなコアです。モバイルアプリから処方箋画像を受け取り、GoogleのGemini AIを使用して高度な光学文字認識（OCR）を実行します。

  * **安全な画像処理**：モバイルアプリケーションからの画像アップロードを安全に処理します。
  * **インテリジェントなデータ抽出**：単純なテキスト認識を超えて、処方箋から以下の重要な情報をインテリジェントに識別し、構造化します：
      * `MED_NM`: 薬の名前
      * `DOSAGE`: 1回あたりの服用量
      * `TIMES_PER_DAY`: 1日あたりの服用回数
      * `DURATION_DAYS`: 処方期間の合計日数
  * **構造化されたJSON出力**：抽出されたデータをクリーンで構造化されたJSON形式で提供し、モバイルアプリが正確な服薬スケジュールを自動的に生成できるようにします。

-----

## 🛠️ 技術スタック

### **フロントエンド (モバイルアプリ)**

  * **フレームワーク**: React Native (Expo使用)
  * **言語**: TypeScript
  * **ナビゲーション**: React Navigation
  * **状態管理**: (適用可能な状態管理ライブラリ、例：Zustand, Redux)
  * **UIコンポーネント**: 一貫性のあるアクセシブルなデザインのためのカスタムUIコンポーネント

### **バックエンド (OCRサーバー)**

  * **フレームワーク**: FastAPI
  * **言語**: Python
  * **AI / ML**: Google Gemini AI
  * **画像処理**: Pillow

-----

## ⚙️ システムアーキテクチャとワークフロー

ユーザーの体験は、シームレスで直感的に設計されています：

1.  **役割の選択**：ユーザーはサインアップし、「高齢者」または「介護者」の役割を選択します。
2.  **処方箋のアップロード**：ユーザーはアプリ内カメラで処方箋の写真を撮るか、ギャラリーから画像を選択します (`imagePicker.tsx`)。
3.  **AI分析リクエスト**：画像はモバイルアプリからバックエンドのOCRサーバーに安全に送信され、処理されます (`ocr-processing.tsx`)。
4.  **データ抽出**：PythonサーバーはGemini AIモデルを利用して画像を分析し、薬の詳細を抽出して構造化します (`ocr_service.py`)。
5.  **スケジュールの作成**：サーバーは構造化されたJSONデータをアプリに返し、アプリはそれに基づいて新しい服薬スケジュールを自動的に作成します (`medications.tsx`)。
6.  **スマートリマインダー**：アプリは、薬を飲む時間になるとユーザーに通知するために、ローカルプッシュ通知をスケジュールして配信します (`ReminderHandler.tsx`)。
7.  **継続的な管理**：ユーザーは服薬遵守状況の確認、スケジュールの管理、必要に応じた新しい処方箋の追加ができます。

-----

## 🚀 はじめに

### 前提条件

  * Node.jsとnpm/yarn
  * Python 3.8+とpip
  * モバイルデバイス上のExpo Goアプリ（開発用）
  * Google Gemini APIキー

### バックエンドのセットアップ

```bash
# 1. OCRサーバーのディレクトリに移動
cd ocr-server/

# 2. Pythonの依存関係をインストール
pip install -r requirements.txt

# 3. .envファイルを作成し、Gemini APIキーを追加
# GEMINI_API_KEY="YOUR_GOOGLE_API_KEY"

# 4. FastAPIサーバーを実行
uvicorn main:app --reload
```

### モバイルアプリのセットアップ

```bash
# 1. React Nativeプロジェクトのディレクトリに移動
cd mediguard-app/

# 2. Node.jsの依存関係をインストール
npm install

# 3. Metroバンドラーを起動
npx expo start
```

携帯電話のExpo GoアプリでQRコードをスキャンして、アプリケーションを実行します。
